{"version":3,"sources":["scripts.js"],"names":["resultElement","document","querySelector","loanElement","resetBtn","runCalculator","loanAmount","parseFloat","value","loanTerm","interestRate","yearlyInterestRate","totalMonths","monthlyPayment","totalPayment","totalInterest","toFixed","displayResult","result","resultMonthly","resultInterest","resultAmount","calcInputTerm","calcInputAmount","calcInputInterest","textContent","changeVisibility","addEventListener","fields","forEach","field","FormValidator","[object Object]","form","this","validateOnSubmit","validateOnBlur","e","preventDefault","fieldError","validateField","userInput","setStatus","status","errorMessage","createElement","className","errorIcon","src","setAttribute","appendChild","inputIcon","previousElementSibling","classList","contains","parentNode","insertBefore","nextSibling","add","nextElementSibling","remove","inputFields","Array","from","querySelectorAll","push","validator","element","action","toggle","initialize"],"mappings":"AACA,MAAAA,cAAAC,SAAAC,cAAA,kBACAC,YAAAF,SAAAC,cAAA,gBACAE,SAAAH,SAAAC,cAAA,oBAEA,SAAAG,gBACA,MAAAC,EAAAC,WAAAN,SAAAC,cAAA,eAAAM,OACAC,EAAAF,WAAAN,SAAAC,cAAA,aAAAM,OACAE,EAAAH,WAAAN,SAAAC,cAAA,iBAAAM,OAEAG,EAAAD,EAAA,IAAA,GACAE,EAAA,GAAAH,EACA,IAAAI,EAAAP,EAAAK,GAAA,GAAA,EAAAA,KAAAC,GACAE,EAAAD,EAAAD,EACAG,EAAAD,EAAAR,EAMA,OAJAQ,EAAAA,EAAAE,QAAA,GACAD,EAAAA,EAAAC,QAAA,GACAH,EAAAA,EAAAG,QAAA,GAEA,CACAF,aAAAA,EACAC,cAAAA,EACAF,eAAAA,EACAP,WAAAA,EACAG,SAAAA,EACAC,aAAAA,GAIA,SAAAO,gBACA,MAAAC,EAAAb,gBACAc,EAAAlB,SAAAC,cAAA,kBACAkB,EAAAnB,SAAAC,cAAA,mBACAmB,EAAApB,SAAAC,cAAA,iBACAoB,EAAArB,SAAAC,cAAA,kBACAqB,EAAAtB,SAAAC,cAAA,oBACAsB,EAAAvB,SAAAC,cAAA,sBAGAiB,EAAAM,YAAA,KAAAP,EAAAL,iBACAO,EAAAK,YAAA,KAAAP,EAAAH,gBACAM,EAAAI,YAAA,KAAAP,EAAAJ,eACAQ,EAAAG,YAAA,GAAAP,EAAAT,kBACAc,EAAAE,YAAA,KAAAP,EAAAZ,aACAkB,EAAAC,YAAA,KAAAP,EAAAR,eAEAgB,iBAAA1B,cAAA,QACA0B,iBAAAvB,YAAA,QAGAC,SAAAuB,iBAAA,SAAA,KACAC,OAAAC,SAAAC,IACAA,EAAAtB,MAAA,MAGAkB,iBAAA1B,cAAA,QACA0B,iBAAAvB,YAAA,WAMA,MAAA4B,cACAC,YAAAC,EAAAL,GACAM,KAAAD,KAAAA,EACAC,KAAAN,OAAAA,EAGAI,aACAE,KAAAC,mBACAD,KAAAE,iBAGAJ,mBACAE,KAAAD,KAAAN,iBAAA,UAAAU,IACAA,EAAAC,iBAEA,MAAAC,EAAAtC,SAAAC,cAAA,wBAEAgC,KAAAN,OAAAC,SAAAC,IACAI,KAAAM,cAAAV,MAGAS,GACAtB,mBAKAe,iBACAE,KAAAN,OAAAC,SAAAC,IACAA,EAAAH,iBAAA,QAAA,KACAO,KAAAM,cAAAV,SAKAE,cAAAF,GACA,MAAAW,EAAAX,EAAAtB,MACA,IAAAiC,GAAAA,GAAA,GAAA,MAAAA,EACAP,KAAAQ,UAAAZ,EAAA,SAEAI,KAAAQ,UAAAZ,EAAA,WAIAE,UAAAF,EAAAa,GACA,MAAAC,EAAA3C,SAAA4C,cAAA,QACAD,EAAAE,UAAA,oBAEA,MAAAC,EAAA9C,SAAA4C,cAAA,OACAE,EAAAC,IAAA,qBACAD,EAAAE,aAAA,cAAA,QACAL,EAAAM,YAAAH,GAEA,MAAAI,EAAArB,EAAAsB,uBAEA,UAAAT,IACAb,EAAAuB,UAAAC,SAAA,wBAAAxB,EAAAyB,WAAAC,aAAAZ,EAAAd,EAAA2B,aACAN,EAAAE,UAAAK,IAAA,sBACA5B,EAAAuB,UAAAK,IAAA,wBAGA,YAAAf,IACAb,EAAA6B,oBAAA7B,EAAA6B,mBAAAC,SACAT,EAAAE,UAAAO,OAAA,sBACA9B,EAAAuB,UAAAO,OAAA,yBAKA,MAAA3B,KAAAhC,SAAAC,cAAA,aACA2D,YAAAC,MAAAC,KAAA9D,SAAA+D,iBAAA,kBACA,IAAApC,OAAA,GAEAiC,YAAAhC,SAAAC,IACAF,OAAAqC,KAAAnC,MAGA,MAAAoC,UAAA,IAAAnC,cAAAE,KAAAL,QAOA,SAAAF,iBAAAyC,EAAAC,GACA,SAAAA,GACAD,EAAAd,UAAAO,OAAA,aAGA,SAAAQ,GACAD,EAAAd,UAAAK,IAAA,aAGA,WAAAU,GACAD,EAAAd,UAAAgB,OAAA,aAfAH,UAAAI","file":"bundle.js","sourcesContent":["// Calculator\r\nconst resultElement = document.querySelector('#resultSection');\r\nconst loanElement = document.querySelector('#loanSection');\r\nconst resetBtn = document.querySelector('#resetCalculator');\r\n\r\nfunction runCalculator() {\r\n  const loanAmount = parseFloat(document.querySelector('#loanAmount').value);\r\n  const loanTerm = parseFloat(document.querySelector('#loanTerm').value);\r\n  const interestRate = parseFloat(document.querySelector('#interestRate').value);\r\n\r\n  const yearlyInterestRate = (interestRate / 100) / 12;\r\n  const totalMonths = loanTerm * 12;\r\n  let monthlyPayment = (loanAmount * yearlyInterestRate) / (1 - ((1 + yearlyInterestRate) ** -totalMonths));\r\n  let totalPayment = monthlyPayment * totalMonths;\r\n  let totalInterest = totalPayment - loanAmount;\r\n\r\n  totalPayment = totalPayment.toFixed(2);\r\n  totalInterest = totalInterest.toFixed(2);\r\n  monthlyPayment = monthlyPayment.toFixed(2);\r\n\r\n  return {\r\n    totalPayment: totalPayment,\r\n    totalInterest: totalInterest,\r\n    monthlyPayment: monthlyPayment,\r\n    loanAmount: loanAmount,\r\n    loanTerm: loanTerm,\r\n    interestRate: interestRate,\r\n  }\r\n}\r\n\r\nfunction displayResult() {\r\n  const result = runCalculator();\r\n  const resultMonthly = document.querySelector('#resultMonthly');\r\n  const resultInterest = document.querySelector('#resultInterest');\r\n  const resultAmount = document.querySelector('#resultAmount');\r\n  const calcInputTerm = document.querySelector('#calcInputTerm');\r\n  const calcInputAmount = document.querySelector('#calcInputAmount');\r\n  const calcInputInterest = document.querySelector('#calcInputInterest');\r\n  \r\n\r\n  resultMonthly.textContent = `$ ${result.monthlyPayment}`;\r\n  resultInterest.textContent = `$ ${result.totalInterest}`;\r\n  resultAmount.textContent = `$ ${result.totalPayment}`;\r\n  calcInputTerm.textContent = `${result.loanTerm}  Years`;\r\n  calcInputAmount.textContent = `$ ${result.loanAmount}`;\r\n  calcInputInterest.textContent = `% ${result.interestRate}`;\r\n\r\n  changeVisibility(resultElement, 'show');\r\n  changeVisibility(loanElement, 'hide');\r\n}\r\n\r\nresetBtn.addEventListener('click', () => {\r\n  fields.forEach((field) => {\r\n    field.value = '';\r\n  });\r\n\r\n  changeVisibility(resultElement, 'hide');\r\n  changeVisibility(loanElement, 'show');\r\n});\r\n\r\n\r\n\r\n// Form Validation\r\nclass FormValidator {\r\n  constructor(form, fields) {\r\n    this.form = form;\r\n    this.fields = fields;\r\n  }\r\n\r\n  initialize() {\r\n    this.validateOnSubmit();\r\n    this.validateOnBlur();\r\n  }\r\n\r\n  validateOnSubmit() {\r\n    this.form.addEventListener('submit', (e) => {\r\n      e.preventDefault();\r\n\r\n      const fieldError = document.querySelector('.input__field--error');\r\n\r\n      this.fields.forEach((field) => {\r\n        this.validateField(field);\r\n      });\r\n\r\n      if (!fieldError) {\r\n        displayResult();\r\n      }\r\n    });\r\n  }\r\n\r\n  validateOnBlur() {\r\n    this.fields.forEach((field) => {\r\n      field.addEventListener('blur', () => {\r\n        this.validateField(field);\r\n      });\r\n    });\r\n  }\r\n\r\n  validateField(field) {\r\n    const userInput = field.value;\r\n    if (userInput == '' || userInput <= 0 || userInput == null) {\r\n      this.setStatus(field, 'error');\r\n    } else {\r\n      this.setStatus(field, 'success');\r\n    }\r\n  }\r\n\r\n  setStatus(field, status) {\r\n    const errorMessage = document.createElement('span');\r\n    errorMessage.className = 'input__error-icon';\r\n\r\n    const errorIcon = document.createElement('img');\r\n    errorIcon.src = './assets/error.svg';\r\n    errorIcon.setAttribute('aria-hidden', 'true');\r\n    errorMessage.appendChild(errorIcon);\r\n\r\n    const inputIcon = field.previousElementSibling;\r\n\r\n    if (status === 'error') {\r\n      if (!field.classList.contains('input__field--error')) {field.parentNode.insertBefore(errorMessage, field.nextSibling);}\r\n      inputIcon.classList.add('input__icon--error');\r\n      field.classList.add('input__field--error');\r\n    } \r\n    \r\n    if (status === 'success') {\r\n      if (field.nextElementSibling) {field.nextElementSibling.remove();}\r\n      inputIcon.classList.remove('input__icon--error');\r\n      field.classList.remove('input__field--error');\r\n    }\r\n  }\r\n}\r\n\r\nconst form = document.querySelector('#loanForm');\r\nconst inputFields = Array.from(document.querySelectorAll('.input__field'));\r\nlet fields = [];\r\n\r\ninputFields.forEach((field) => {\r\n  fields.push(field);\r\n});\r\n\r\nconst validator = new FormValidator(form, fields);\r\n\r\nvalidator.initialize();\r\n\r\n\r\n\r\n// Helpers\r\nfunction changeVisibility(element, action) {\r\n  if (action === 'show') {\r\n    element.classList.remove('is-hidden');\r\n  }\r\n\r\n  if (action === 'hide') {\r\n    element.classList.add('is-hidden');\r\n  }\r\n\r\n  if (action === 'toggle') {\r\n    element.classList.toggle('is-hidden')\r\n  }\r\n}"]}